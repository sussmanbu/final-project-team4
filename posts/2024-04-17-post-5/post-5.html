<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Team 4">
<meta name="dcterms.date" content="2024-04-17">

<title>MA [46]15 Final Project - Team 4 - Post 5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">MA [46]15 Final Project - Team 4</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../about.html" rel="" target="">
 <span class="menu-text">MA415_team4</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../big_picture.html" rel="" target="">
 <span class="menu-text">Big Picture</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../analysis.html" rel="" target="">
 <span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../data.html" rel="" target="">
 <span class="menu-text">Data</span></a>
  </li>  
</ul>
            <div class="quarto-navbar-tools">
</div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Post 5</h1>
                      </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Team 4 </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">April 17, 2024</p>
      </div>
    </div>
    
      <div>
      <div class="quarto-title-meta-heading">Modified</div>
      <div class="quarto-title-meta-contents">
        <p class="date-modified">April 17, 2024</p>
      </div>
    </div>
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">




<p>This week we found two datasets to merge our original dataset with.</p>
<p>1.) The first data set that we are merging with is a dataset that includes more specific world regions. Our original dataset only contains 9 different regions (look at the data_example dataframe below). The dataset that we are merging with (named continent_example) contains 17 different regions, which makes our analysis more specified. The original dataset grouped Central and Southern Asia together, and the new dataset does not do this, which allows us to find more differences within countries. This dataset was found from this link: https://www.kaggle.com/datasets/andradaolteanu/country-mapping-iso-continent-region.</p>
<p>2.) The second dataset that we are merging with is a PISA dataset that contains PISA scores from countries all over the world. PISA is a standardized exam that is taken all around the world. Knowing these scores will allow us to make more exciting and interesting models that may provide more insight into the disparties between countries. What is cool about this dataset is that it contains the overall PISA score, but also the breakdowns. For example, it contains each country’s overall score, as well as each country’s math, science, and reading score. The downside of this dataset is that it does not contain scores from African countries. This dataset was found from this link: https://www.oecd.org/pisa/data/.</p>
<p>These are the two datasets that we have merged our original datset; however, there are a few more datasets that we are considering. We want to merge our dataset with some sort of teacher salary dataset as that may provide some insight into why the PISA scores are the way they are. Additionaly, we want to add years to the PISA scores. We only included PISA scores from 2022, and it may be interesting to include PISA scores from specific years.</p>
<p>https://www.kaggle.com/datasets/andradaolteanu/country-mapping-iso-continent-region</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(tidyverse))</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(tidymodels))</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(broom))</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">suppressPackageStartupMessages</span>(<span class="fu">library</span>(scales))</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>data <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'dataset/educ.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 212969 Columns: 86
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (14): iso_code, region_group, income_group, country, survey, level, cate...
dbl (72): year, grade, comp_prim_v2_m, comp_lowsec_v2_m, comp_upsec_v2_m, co...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>continent <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'dataset/continents2.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 249 Columns: 11
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (7): name, alpha-2, alpha-3, iso_3166-2, region, sub-region, intermediat...
dbl (4): country-code, region-code, sub-region-code, intermediate-region-code

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>pisa <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">'dataset/pisa-scores-by-country-2024.csv'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Rows: 81 Columns: 6
── Column specification ────────────────────────────────────────────────────────
Delimiter: ","
chr (1): country
dbl (5): OverallPisaScore2022, PISAScoresMathScore2022, PISAScoresScienceSco...

ℹ Use `spec()` to retrieve the full column specification for this data.
ℹ Specify the column types or set `show_col_types = FALSE` to quiet this message.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data_example <span class="ot">&lt;-</span> data <span class="sc">|&gt;</span> <span class="fu">group_by</span>(region_group) <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">1</span>) </span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>data_example</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 8 × 86
# Groups:   region_group [8]
  iso_code region_group   income_group country survey  year level grade category
  &lt;chr&gt;    &lt;chr&gt;          &lt;chr&gt;        &lt;chr&gt;   &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt; &lt;dbl&gt; &lt;chr&gt;   
1 AFG      Central and S… Low income … Afghan… DHS     2015 &lt;NA&gt;     NA Ethnici…
2 CHN      Eastern and S… Upper middl… China   CFPS    2010 &lt;NA&gt;     NA Ethnici…
3 ALB      Europe and No… Upper middl… Albania DHS     2009 &lt;NA&gt;     NA Ethnici…
4 ARG      Latin America… Upper middl… Argent… EPH     2004 &lt;NA&gt;     NA Region  
5 ARE      Northern Afri… High income… U. A. … PIRLS   2011 Prim…     4 Location
6 AUS      Oceania        High income… Austra… HES-S…  2010 &lt;NA&gt;     NA Ethnici…
7 AGO      Sub-Saharan A… Lower middl… Angola  DHS     2015 &lt;NA&gt;     NA Location
8 &lt;NA&gt;     &lt;NA&gt;           Low income … &lt;NA&gt;    &lt;NA&gt;      NA &lt;NA&gt;     NA Total   
# ℹ 77 more variables: Sex &lt;chr&gt;, Location &lt;chr&gt;, Wealth &lt;chr&gt;, Region &lt;chr&gt;,
#   Ethnicity &lt;chr&gt;, Religion &lt;chr&gt;, Language &lt;chr&gt;, comp_prim_v2_m &lt;dbl&gt;,
#   comp_lowsec_v2_m &lt;dbl&gt;, comp_upsec_v2_m &lt;dbl&gt;, comp_prim_1524_m &lt;dbl&gt;,
#   comp_lowsec_1524_m &lt;dbl&gt;, comp_upsec_2029_m &lt;dbl&gt;, eduyears_2024_m &lt;dbl&gt;,
#   edu2_2024_m &lt;dbl&gt;, edu4_2024_m &lt;dbl&gt;, eduout_prim_m &lt;dbl&gt;,
#   eduout_lowsec_m &lt;dbl&gt;, eduout_upsec_m &lt;dbl&gt;, comp_prim_v2_no &lt;dbl&gt;,
#   comp_lowsec_v2_no &lt;dbl&gt;, comp_upsec_v2_no &lt;dbl&gt;, comp_prim_1524_no &lt;dbl&gt;, …</code></pre>
</div>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>continent_example <span class="ot">&lt;-</span> continent <span class="sc">|&gt;</span> <span class="fu">group_by</span>(<span class="st">`</span><span class="at">sub-region</span><span class="st">`</span>) <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n=</span><span class="dv">1</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>continent_example</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 × 11
# Groups:   sub-region [18]
   name      `alpha-2` `alpha-3` `country-code` `iso_3166-2` region `sub-region`
   &lt;chr&gt;     &lt;chr&gt;     &lt;chr&gt;              &lt;dbl&gt; &lt;chr&gt;        &lt;chr&gt;  &lt;chr&gt;       
 1 Australia AU        AUS                   36 ISO 3166-2:… Ocean… Australia a…
 2 Kazakhst… KZ        KAZ                  398 ISO 3166-2:… Asia   Central Asia
 3 China     CN        CHN                  156 ISO 3166-2:… Asia   Eastern Asia
 4 Belarus   BY        BLR                  112 ISO 3166-2:… Europe Eastern Eur…
 5 Anguilla  AI        AIA                  660 ISO 3166-2:… Ameri… Latin Ameri…
 6 Fiji      FJ        FJI                  242 ISO 3166-2:… Ocean… Melanesia   
 7 Guam      GU        GUM                  316 ISO 3166-2:… Ocean… Micronesia  
 8 Algeria   DZ        DZA                   12 ISO 3166-2:… Africa Northern Af…
 9 Bermuda   BM        BMU                   60 ISO 3166-2:… Ameri… Northern Am…
10 Åland Is… AX        ALA                  248 ISO 3166-2:… Europe Northern Eu…
11 American… AS        ASM                   16 ISO 3166-2:… Ocean… Polynesia   
12 Brunei D… BN        BRN                   96 ISO 3166-2:… Asia   South-easte…
13 Afghanis… AF        AFG                    4 ISO 3166-2:… Asia   Southern As…
14 Albania   AL        ALB                    8 ISO 3166-2:… Europe Southern Eu…
15 Angola    AO        AGO                   24 ISO 3166-2:… Africa Sub-Saharan…
16 Armenia   AM        ARM                   51 ISO 3166-2:… Asia   Western Asia
17 Austria   AT        AUT                   40 ISO 3166-2:… Europe Western Eur…
18 Antarcti… AQ        ATA                   10 ISO 3166-2:… &lt;NA&gt;   &lt;NA&gt;        
# ℹ 4 more variables: `intermediate-region` &lt;chr&gt;, `region-code` &lt;dbl&gt;,
#   `sub-region-code` &lt;dbl&gt;, `intermediate-region-code` &lt;dbl&gt;</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>continent <span class="ot">&lt;-</span> continent <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">country =</span> name,</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">sub_region =</span> <span class="st">`</span><span class="at">sub-region</span><span class="st">`</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">#continent</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>merged_data <span class="ot">&lt;-</span> <span class="fu">merge</span>(data, continent, <span class="at">by =</span> <span class="st">"country"</span>)</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>merged_data2 <span class="ot">&lt;-</span> <span class="fu">merge</span>(merged_data, pisa, <span class="at">by =</span> <span class="st">"country"</span>)</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pisa)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 6
  country     OverallPisaScore2022 PISAScoresMathScore2…¹ PISAScoresScienceSco…²
  &lt;chr&gt;                      &lt;dbl&gt;                  &lt;dbl&gt;                  &lt;dbl&gt;
1 China                       1605                    552                    543
2 United Sta…                 1468                    465                    499
3 Indonesia                   1108                    366                    383
4 Brazil                      1192                    379                    403
5 Mexico                      1220                    395                    410
6 Japan                       1599                    536                    547
# ℹ abbreviated names: ¹​PISAScoresMathScore2022, ²​PISAScoresScienceScore2022
# ℹ 2 more variables: PISAScoresReadingScore2022 &lt;dbl&gt;,
#   PISAScoresOverallScore2018 &lt;dbl&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(merged_data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>      country iso_code              region_group         income_group survey
1 Afghanistan      AFG Central and Southern Asia Low income countries   MICS
2 Afghanistan      AFG Central and Southern Asia Low income countries    DHS
3 Afghanistan      AFG Central and Southern Asia Low income countries    DHS
4 Afghanistan      AFG Central and Southern Asia Low income countries    DHS
5 Afghanistan      AFG Central and Southern Asia Low income countries    DHS
6 Afghanistan      AFG Central and Southern Asia Low income countries   MICS
  year level grade              category    Sex Location     Wealth    Region
1 2011  &lt;NA&gt;    NA Sex &amp; Wealth &amp; Region Female     &lt;NA&gt; Quintile 4 Region CH
2 2015  &lt;NA&gt;    NA       Wealth &amp; Region   &lt;NA&gt;     &lt;NA&gt; Quintile 2   Helmand
3 2015  &lt;NA&gt;    NA          Sex &amp; Region   Male     &lt;NA&gt;       &lt;NA&gt;  Kandahar
4 2015  &lt;NA&gt;    NA Sex &amp; Wealth &amp; Region Female     &lt;NA&gt; Quintile 5    Ghazni
5 2015  &lt;NA&gt;    NA Sex &amp; Wealth &amp; Region   Male     &lt;NA&gt; Quintile 3   Jawzjan
6 2011  &lt;NA&gt;    NA Sex &amp; Wealth &amp; Region Female     &lt;NA&gt; Quintile 3  Region N
  Ethnicity Religion Language comp_prim_v2_m comp_lowsec_v2_m comp_upsec_v2_m
1      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.5761           0.2988          0.1509
2      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.3533           0.1675          0.1572
3      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.4692           0.2788          0.1677
4      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.7914           0.6618              NA
5      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.8165               NA              NA
6      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.2880           0.0678          0.0211
  comp_prim_1524_m comp_lowsec_1524_m comp_upsec_2029_m eduyears_2024_m
1           0.4383             0.3015            0.1290              NA
2           0.2763             0.1727            0.0666          2.4788
3           0.3768             0.2165            0.1139          3.2615
4           0.5969             0.4152            0.1773          2.7868
5           0.8459             0.6850            0.4035              NA
6           0.1653             0.0720            0.0063              NA
  edu2_2024_m edu4_2024_m eduout_prim_m eduout_lowsec_m eduout_upsec_m
1          NA          NA            NA              NA             NA
2      0.7219      0.7396            NA              NA             NA
3      0.6230      0.6530            NA              NA             NA
4      0.7139      0.7139            NA              NA             NA
5          NA          NA            NA              NA             NA
6          NA          NA            NA              NA             NA
  comp_prim_v2_no comp_lowsec_v2_no comp_upsec_v2_no comp_prim_1524_no
1              70                60               39               195
2             116                66               78               302
3             254               197              176               703
4              38                38               NA               111
5              45                NA               NA                87
6             121                99               64               340
  comp_lowsec_1524_no comp_upsec_2029_no eduyears_2024_no edu2_2024_no
1                 195                144               NA           NA
2                 302                275              131          131
3                 703                548              292          292
4                 111                 73               39           39
5                  87                 62               NA           NA
6                 340                238               NA           NA
  edu4_2024_no eduout_prim_no eduout_lowsec_no eduout_upsec_no preschool_3_m
1           NA             NA               NA              NA            NA
2          131             NA               NA              NA            NA
3          292             NA               NA              NA            NA
4           39             NA               NA              NA            NA
5           NA             NA               NA              NA            NA
6           NA             NA               NA              NA            NA
  preschool_3_no preschool_1ybefore_m preschool_1ybefore_no edu0_prim_m
1             NA                   NA                    NA          NA
2             NA                   NA                    NA      0.4917
3             NA                   NA                    NA      0.4670
4             NA                   NA                    NA      0.0621
5             NA                   NA                    NA      0.1411
6             NA                   NA                    NA          NA
  edu0_prim_no trans_prim_m trans_prim_no trans_lowsec_m trans_lowsec_no
1           NA           NA            NA             NA              NA
2          318       0.9143            56             NA              NA
3          529       0.8899           173         0.8869              99
4           64       0.9677            40         0.9592              32
5           67       0.9420            46             NA              NA
6           NA           NA            NA             NA              NA
  comp_higher_2yrs_2529_m comp_higher_2yrs_2529_no comp_higher_4yrs_2529_m
1                      NA                       NA                      NA
2                       0                      147                       0
3                       0                      258                       0
4                       0                       39                       0
5                       0                       32                       0
6                      NA                       NA                      NA
  comp_higher_4yrs_2529_no comp_higher_4yrs_3034_m comp_higher_4yrs_3034_no
1                       NA                      NA                       NA
2                      147                       0                       89
3                      258                       0                      166
4                       39                      NA                       NA
5                       32                      NA                       NA
6                       NA                      NA                       NA
  attend_higher_1822_m attend_higher_1822_no overage2plus_m overage2plus_no
1                   NA                    NA             NA              NA
2               0.0490                   151         0.1347             229
3               0.0836                   397         0.3825             455
4               0.3522                    63         0.1203              72
5               0.2364                    47         0.2538              81
6                   NA                    NA             NA              NA
  literacy_1524_m literacy_1524_no mlevel1_m mlevel1_no rlevel1_m rlevel1_no
1              NA               NA        NA         NA        NA         NA
2          0.4960              102        NA         NA        NA         NA
3          0.5592              111        NA         NA        NA         NA
4          0.5360               31        NA         NA        NA         NA
5              NA               NA        NA         NA        NA         NA
6              NA               NA        NA         NA        NA         NA
  slevel1_m slevel1_no mlevel2_m mlevel2_no rlevel2_m rlevel2_no slevel2_m
1        NA         NA        NA         NA        NA         NA        NA
2        NA         NA        NA         NA        NA         NA        NA
3        NA         NA        NA         NA        NA         NA        NA
4        NA         NA        NA         NA        NA         NA        NA
5        NA         NA        NA         NA        NA         NA        NA
6        NA         NA        NA         NA        NA         NA        NA
  slevel2_no mlevel3_m mlevel3_no rlevel3_m rlevel3_no slevel3_m slevel3_no
1         NA        NA         NA        NA         NA        NA         NA
2         NA        NA         NA        NA         NA        NA         NA
3         NA        NA         NA        NA         NA        NA         NA
4         NA        NA         NA        NA         NA        NA         NA
5         NA        NA         NA        NA         NA        NA         NA
6         NA        NA         NA        NA         NA        NA         NA
  mlevel4_m mlevel4_no rlevel4_m rlevel4_no slevel4_m slevel4_no alpha-2
1        NA         NA        NA         NA        NA         NA      AF
2        NA         NA        NA         NA        NA         NA      AF
3        NA         NA        NA         NA        NA         NA      AF
4        NA         NA        NA         NA        NA         NA      AF
5        NA         NA        NA         NA        NA         NA      AF
6        NA         NA        NA         NA        NA         NA      AF
  alpha-3 country-code    iso_3166-2 region    sub_region intermediate-region
1     AFG            4 ISO 3166-2:AF   Asia Southern Asia                &lt;NA&gt;
2     AFG            4 ISO 3166-2:AF   Asia Southern Asia                &lt;NA&gt;
3     AFG            4 ISO 3166-2:AF   Asia Southern Asia                &lt;NA&gt;
4     AFG            4 ISO 3166-2:AF   Asia Southern Asia                &lt;NA&gt;
5     AFG            4 ISO 3166-2:AF   Asia Southern Asia                &lt;NA&gt;
6     AFG            4 ISO 3166-2:AF   Asia Southern Asia                &lt;NA&gt;
  region-code sub-region-code intermediate-region-code
1         142              34                       NA
2         142              34                       NA
3         142              34                       NA
4         142              34                       NA
5         142              34                       NA
6         142              34                       NA</code></pre>
</div>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(merged_data2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  country iso_code                region_group                  income_group
1 Albania      ALB Europe and Northern America Upper middle income countries
2 Albania      ALB Europe and Northern America Upper middle income countries
3 Albania      ALB Europe and Northern America Upper middle income countries
4 Albania      ALB Europe and Northern America Upper middle income countries
5 Albania      ALB Europe and Northern America Upper middle income countries
6 Albania      ALB Europe and Northern America Upper middle income countries
  survey year           level grade                category    Sex Location
1    DHS 2009            &lt;NA&gt;    NA   Sex &amp; Wealth &amp; Region   Male     &lt;NA&gt;
2   PISA 2009 Upper secondary    NA Location &amp; Sex &amp; Wealth Female    Urban
3   PISA 2012 Upper secondary    NA Location &amp; Sex &amp; Wealth Female    Urban
4    DHS 2009            &lt;NA&gt;    NA Location &amp; Sex &amp; Wealth Female    Urban
5   MICS 2005            &lt;NA&gt;    NA            Sex &amp; Region Female     &lt;NA&gt;
6   MICS 2000            &lt;NA&gt;    NA                  Wealth   &lt;NA&gt;     &lt;NA&gt;
      Wealth  Region Ethnicity Religion Language comp_prim_v2_m
1 Quintile 4 Coastal      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         1.0000
2 Quintile 5    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;             NA
3 Quintile 2    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;             NA
4 Quintile 3    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;         0.9721
5       &lt;NA&gt;  Tirana      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;             NA
6 Quintile 1    &lt;NA&gt;      &lt;NA&gt;     &lt;NA&gt;     &lt;NA&gt;             NA
  comp_lowsec_v2_m comp_upsec_v2_m comp_prim_1524_m comp_lowsec_1524_m
1           0.7303              NA           0.9969             0.6819
2               NA              NA               NA                 NA
3               NA              NA               NA                 NA
4           0.7413           0.367           0.9379             0.4985
5               NA              NA               NA                 NA
6               NA              NA               NA                 NA
  comp_upsec_2029_m eduyears_2024_m edu2_2024_m edu4_2024_m eduout_prim_m
1            0.5380         11.2648      0.0000      0.0000        0.1064
2                NA              NA          NA          NA            NA
3                NA              NA          NA          NA            NA
4            0.3462          8.7861      0.0681      0.0681        0.0298
5                NA              NA      0.0000      0.0000            NA
6                NA              NA      0.0000      0.0000            NA
  eduout_lowsec_m eduout_upsec_m comp_prim_v2_no comp_lowsec_v2_no
1          0.0117         0.3059              54                57
2              NA             NA              NA                NA
3              NA             NA              NA                NA
4          0.0981         0.2145              93                53
5              NA             NA              NA                NA
6              NA             NA              NA                NA
  comp_upsec_v2_no comp_prim_1524_no comp_lowsec_1524_no comp_upsec_2029_no
1               NA               134                 134                 62
2               NA                NA                  NA                 NA
3               NA                NA                  NA                 NA
4               53               190                 190                140
5               NA                NA                  NA                 NA
6               NA                NA                  NA                 NA
  eduyears_2024_no edu2_2024_no edu4_2024_no eduout_prim_no eduout_lowsec_no
1               37           37           37             71               68
2               NA           NA           NA             NA               NA
3               NA           NA           NA             NA               NA
4               79           79           79            120              119
5              172          172          172             NA               NA
6              204          204          204             NA               NA
  eduout_upsec_no preschool_3_m preschool_3_no preschool_1ybefore_m
1              59            NA             NA                   NA
2              NA            NA             NA                   NA
3              NA            NA             NA                   NA
4              80            NA             NA                   NA
5              NA        0.3219             47                   NA
6              NA            NA             NA                   NA
  preschool_1ybefore_no edu0_prim_m edu0_prim_no trans_prim_m trans_prim_no
1                    NA      0.0346           87       0.7042            67
2                    NA          NA           NA           NA            NA
3                    NA          NA           NA           NA            NA
4                    NA      0.0394          135       0.7212            91
5                    NA      0.0054          186           NA            NA
6                    NA          NA           NA           NA            NA
  trans_lowsec_m trans_lowsec_no comp_higher_2yrs_2529_m
1         0.8422              37                      NA
2             NA              NA                      NA
3             NA              NA                      NA
4         0.9644              41                  0.1093
5             NA              NA                      NA
6             NA              NA                      NA
  comp_higher_2yrs_2529_no comp_higher_4yrs_2529_m comp_higher_4yrs_2529_no
1                       NA                      NA                       NA
2                       NA                      NA                       NA
3                       NA                      NA                       NA
4                       56                  0.0911                       56
5                       NA                      NA                       NA
6                       NA                      NA                       NA
  comp_higher_4yrs_3034_m comp_higher_4yrs_3034_no attend_higher_1822_m
1                  0.0604                       33               0.1049
2                      NA                       NA                   NA
3                      NA                       NA                   NA
4                  0.0464                       74               0.1818
5                      NA                       NA               0.1350
6                      NA                       NA                   NA
  attend_higher_1822_no overage2plus_m overage2plus_no literacy_1524_m
1                    60         0.0366             123          0.9742
2                    NA             NA              NA              NA
3                    NA             NA              NA              NA
4                    84         0.0955             213          0.9611
5                   177         0.0126             146          0.9968
6                    NA             NA              NA              NA
  literacy_1524_no mlevel1_m mlevel1_no rlevel1_m rlevel1_no slevel1_m
1              107        NA         NA        NA         NA        NA
2               NA        NA         NA        NA         NA        NA
3               NA        NA         NA        NA         NA        NA
4              339        NA         NA        NA         NA        NA
5              966        NA         NA        NA         NA        NA
6               NA        NA         NA        NA         NA        NA
  slevel1_no mlevel2_m mlevel2_no rlevel2_m rlevel2_no slevel2_m slevel2_no
1         NA        NA         NA        NA         NA        NA         NA
2         NA        NA         NA        NA         NA        NA         NA
3         NA        NA         NA        NA         NA        NA         NA
4         NA        NA         NA        NA         NA        NA         NA
5         NA        NA         NA        NA         NA        NA         NA
6         NA        NA         NA        NA         NA        NA         NA
  mlevel3_m mlevel3_no rlevel3_m rlevel3_no slevel3_m slevel3_no mlevel4_m
1        NA         NA        NA         NA        NA         NA        NA
2        NA         NA        NA         NA        NA         NA        NA
3        NA         NA        NA         NA        NA         NA        NA
4        NA         NA        NA         NA        NA         NA        NA
5        NA         NA        NA         NA        NA         NA        NA
6        NA         NA        NA         NA        NA         NA        NA
  mlevel4_no rlevel4_m rlevel4_no slevel4_m slevel4_no alpha-2 alpha-3
1         NA        NA         NA        NA         NA      AL     ALB
2         NA        NA         NA        NA         NA      AL     ALB
3         NA        NA         NA        NA         NA      AL     ALB
4         NA        NA         NA        NA         NA      AL     ALB
5         NA        NA         NA        NA         NA      AL     ALB
6         NA        NA         NA        NA         NA      AL     ALB
  country-code    iso_3166-2 region      sub_region intermediate-region
1            8 ISO 3166-2:AL Europe Southern Europe                &lt;NA&gt;
2            8 ISO 3166-2:AL Europe Southern Europe                &lt;NA&gt;
3            8 ISO 3166-2:AL Europe Southern Europe                &lt;NA&gt;
4            8 ISO 3166-2:AL Europe Southern Europe                &lt;NA&gt;
5            8 ISO 3166-2:AL Europe Southern Europe                &lt;NA&gt;
6            8 ISO 3166-2:AL Europe Southern Europe                &lt;NA&gt;
  region-code sub-region-code intermediate-region-code OverallPisaScore2022
1         150              39                       NA                 1102
2         150              39                       NA                 1102
3         150              39                       NA                 1102
4         150              39                       NA                 1102
5         150              39                       NA                 1102
6         150              39                       NA                 1102
  PISAScoresMathScore2022 PISAScoresScienceScore2022 PISAScoresReadingScore2022
1                     368                        376                        358
2                     368                        376                        358
3                     368                        376                        358
4                     368                        376                        358
5                     368                        376                        358
6                     368                        376                        358
  PISAScoresOverallScore2018
1                         NA
2                         NA
3                         NA
4                         NA
5                         NA
6                         NA</code></pre>
</div>
</div>
<p>With this new data, we are able to make some new visualizations. For example, the following is a graph that shows the relative PISA scores for eahc Latin American Country.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Assuming merged_data is your original data frame</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>americas_pisa_long <span class="ot">&lt;-</span> merged_data2 <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(region <span class="sc">==</span> <span class="st">'Americas'</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_overall_mean =</span> <span class="fu">mean</span>(OverallPisaScore2022, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_math_mean =</span> <span class="fu">mean</span>(PISAScoresMathScore2022, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="co"># Assuming you meant Math Score here</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_science_mean =</span> <span class="fu">mean</span>(PISAScoresScienceScore2022, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_reading_mean =</span> <span class="fu">mean</span>(PISAScoresReadingScore2022, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"pisa_"</span>),</span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">"score_type"</span>,</span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">"score"</span></span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">score_type =</span> <span class="fu">factor</span>(score_type, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"pisa_overall_mean"</span>, <span class="st">"pisa_math_mean"</span>, <span class="st">"pisa_science_mean"</span>, <span class="st">"pisa_reading_mean"</span>)))</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-18"><a href="#cb17-18" aria-hidden="true" tabindex="-1"></a><span class="co"># Creating the plot</span></span>
<span id="cb17-19"><a href="#cb17-19" aria-hidden="true" tabindex="-1"></a>americas_pisa_plot <span class="ot">&lt;-</span> americas_pisa_long <span class="sc">%&gt;%</span></span>
<span id="cb17-20"><a href="#cb17-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> score, <span class="at">fill =</span> score_type)) <span class="sc">+</span> </span>
<span id="cb17-21"><a href="#cb17-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span> </span>
<span id="cb17-22"><a href="#cb17-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> <span class="fu">label_comma</span>()) <span class="sc">+</span> </span>
<span id="cb17-23"><a href="#cb17-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb17-24"><a href="#cb17-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"PISA Score"</span>, <span class="at">x =</span> <span class="st">"Country"</span>, <span class="at">fill =</span> <span class="st">"Score Type"</span>) <span class="sc">+</span></span>
<span id="cb17-25"><a href="#cb17-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Pastel1"</span>) <span class="co"># Using a color palette for better visual distinction</span></span>
<span id="cb17-26"><a href="#cb17-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-27"><a href="#cb17-27" aria-hidden="true" tabindex="-1"></a>americas_pisa_plot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="post-5_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>pisa_summary <span class="ot">&lt;-</span> merged_data2 <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(country) <span class="sc">|&gt;</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_primary_completion_rate =</span> <span class="fu">mean</span>(comp_prim_v2_m, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">obs_primary_completion_rate =</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(comp_prim_v2_m)),</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent_people_not_in_primary_school =</span> <span class="fu">mean</span>(eduout_upsec_m, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean_educ_years_20_24 =</span> <span class="fu">mean</span>(eduyears_2024_m, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">attend_higher_education =</span> <span class="fu">mean</span>(attend_higher_1822_m, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">number_complete_prim_1524 =</span> <span class="fu">mean</span>(comp_prim_1524_no, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_overall_mean =</span> <span class="fu">mean</span>(OverallPisaScore2022),</span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_math_mean =</span> <span class="fu">mean</span>(PISAScoresScienceScore2022),</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_science_mean =</span> <span class="fu">mean</span>(PISAScoresScienceScore2022),</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">pisa_reading_mean =</span> <span class="fu">mean</span>(PISAScoresReadingScore2022)</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>pisa_summary</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 69 × 11
   country  mean_primary_complet…¹ obs_primary_completi…² percent_people_not_i…³
   &lt;chr&gt;                     &lt;dbl&gt;                  &lt;int&gt;                  &lt;dbl&gt;
 1 Albania                   0.974                    230                 0.231 
 2 Argenti…                  0.963                    453                 0.136 
 3 Austral…                  0.993                     87                 0.0944
 4 Austria                 NaN                          0               NaN     
 5 Azerbai…                  0.975                    157                 0.151 
 6 Belgium                 NaN                          0               NaN     
 7 Brazil                    0.811                   4085                 0.164 
 8 Bulgaria                NaN                          0               NaN     
 9 Cambodia                  0.616                    851                 0.583 
10 Canada                    0.997                     97                 0.0367
# ℹ 59 more rows
# ℹ abbreviated names: ¹​mean_primary_completion_rate,
#   ²​obs_primary_completion_rate, ³​percent_people_not_in_primary_school
# ℹ 7 more variables: mean_educ_years_20_24 &lt;dbl&gt;,
#   attend_higher_education &lt;dbl&gt;, number_complete_prim_1524 &lt;dbl&gt;,
#   pisa_overall_mean &lt;dbl&gt;, pisa_math_mean &lt;dbl&gt;, pisa_science_mean &lt;dbl&gt;,
#   pisa_reading_mean &lt;dbl&gt;</code></pre>
</div>
</div>
<p>Using this data, we have also made some relatively simple multivariate regression models. The linear regression model below examines the relationship betwee the PISA math score, and factors such as primary school completition rate, % of people not in primary school, mean education years for 20-24 yera olds, and % of people who attend higher education. From the coefficients it seems that all of these factors have a positive linear relationship with the PISA math score. However, the mean education years for 20-24 year olds has a negative relationship which is not what we would expect. This may be due to some sort of colinearity or homoscedacity, which we plan to examine in this coming week.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>lm_model <span class="ot">&lt;-</span> </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">linear_reg</span>() <span class="sc">|&gt;</span> </span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">set_engine</span>(<span class="st">"lm"</span>)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>lm_form_fit2 <span class="ot">&lt;-</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  lm_model <span class="sc">|&gt;</span> </span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">fit</span>(pisa_math_mean <span class="sc">~</span> mean_primary_completion_rate <span class="sc">+</span> percent_people_not_in_primary_school <span class="sc">+</span> mean_educ_years_20_24 <span class="sc">+</span> attend_higher_education, <span class="at">data =</span> pisa_summary)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>lm_form_fit2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>parsnip model object


Call:
stats::lm(formula = pisa_math_mean ~ mean_primary_completion_rate + 
    percent_people_not_in_primary_school + mean_educ_years_20_24 + 
    attend_higher_education, data = data)

Coefficients:
                         (Intercept)          mean_primary_completion_rate  
                              231.47                                339.55  
percent_people_not_in_primary_school                 mean_educ_years_20_24  
                               22.55                                -17.28  
             attend_higher_education  
                              201.50  </code></pre>
</div>
</div>
<p>Here, we can see that the r^2 value is 0.353 which is not a super high r^2 value, so we will continue to refine our modeling in the coming week.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">glance</span>(lm_form_fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 × 12
  r.squared adj.r.squared sigma statistic p.value    df logLik   AIC   BIC
      &lt;dbl&gt;         &lt;dbl&gt; &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1     0.353         0.201  40.2      2.32  0.0988     4  -110.  231.  238.
# ℹ 3 more variables: deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;</code></pre>
</div>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>broom<span class="sc">::</span><span class="fu">augment</span>(lm_form_fit2, <span class="at">new_data =</span> pisa_summary)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 69 × 13
   .pred .resid country    mean_primary_completion_rate obs_primary_completion…¹
   &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;                             &lt;dbl&gt;                    &lt;int&gt;
 1  418.  -42.3 Albania                           0.974                      230
 2  447.  -41.3 Argentina                         0.963                      453
 3  NaN   NaN   Australia                         0.993                       87
 4  NaN   NaN   Austria                         NaN                            0
 5  406.  -26.1 Azerbaijan                        0.975                      157
 6  NaN   NaN   Belgium                         NaN                            0
 7  379.   24.2 Brazil                            0.811                     4085
 8  NaN   NaN   Bulgaria                        NaN                            0
 9  360.  -12.5 Cambodia                          0.616                      851
10  NaN   NaN   Canada                            0.997                       97
# ℹ 59 more rows
# ℹ abbreviated name: ¹​obs_primary_completion_rate
# ℹ 8 more variables: percent_people_not_in_primary_school &lt;dbl&gt;,
#   mean_educ_years_20_24 &lt;dbl&gt;, attend_higher_education &lt;dbl&gt;,
#   number_complete_prim_1524 &lt;dbl&gt;, pisa_overall_mean &lt;dbl&gt;,
#   pisa_math_mean &lt;dbl&gt;, pisa_science_mean &lt;dbl&gt;, pisa_reading_mean &lt;dbl&gt;</code></pre>
</div>
</div>



</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>